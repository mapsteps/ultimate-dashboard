(()=>{var n={};function e(n){let e=document.querySelector(n);return e instanceof HTMLElement?e:null}function t(n){let e=document.querySelectorAll(n),t=[];for(let n=0;n<e.length;n++){let o=e[n];o instanceof HTMLElement&&t.push(o)}return t}function o(n){let e=document.querySelector(n);return e instanceof HTMLInputElement?e:null}n=tns,function(i){let s;let a=e(".udb-onboarding-page"),d=e(".onboarding-heatbox .heatbox-footer"),u=e(".onboarding-heatbox .skip-button"),c=e(".onboarding-heatbox .save-button"),l=e(".onboarding-heatbox .subscribe-button"),r=e(".udb-skip-discount a"),b=t("[data-udb-show-on='subscribe']"),f=t("[data-udb-show-on='skip-discount']"),p=e(".onboarding-heatbox .udb-discount-notif"),h=["modules","subscription","finished"],g="modules",m=!1,x=window.udbPluginOnboarding;function v(n){"modules"===(g=h[n.index])?(p?.classList.add("is-hidden"),d?.classList.remove("is-hidden")):"subscription"===g?(p?.classList.remove("is-hidden"),d?.classList.add("is-hidden")):"finished"===g&&(p?.classList.add("is-hidden"),d?.classList.add("is-hidden"))}function y(n){switch(g){case"modules":s.goTo("next");break;case"subscription":window.location.href=x?.adminUrl??""}}function L(n){m||(w(c),i.ajax({url:x?.ajaxUrl,type:"POST",data:{action:"udb_plugin_onboarding_save_modules",nonce:x?.nonces.saveModules,modules:function(){let n=function(n){let e=document.querySelectorAll(n),t=[];for(let n=0;n<e.length;n++){let o=e[n];o instanceof HTMLInputElement&&t.push(o)}return t}('.udb-modules-slide .module-toggle input[type="checkbox"]');if(!n.length)return[];let e=[];return n.forEach(function(n){let t=n.id.replace("udb_modules__","");n.checked&&e.push(t)}),e}()}}).done(function(n){n.success&&s.goTo("next")}).fail(k).always(function(){S(c)}))}function _(n){let e=o("#udb-subscription-name"),t=o("#udb-subscription-email");!m&&e&&t&&(w(l),i.ajax({url:x?.ajaxUrl,type:"POST",data:{action:"udb_plugin_onboarding_subscribe",nonce:x?.nonces.subscribe,name:e.value,email:t.value,referrer:a?.dataset.udbReferrer??""}}).done(function(n){n.success&&(f.forEach(function(n){n.style.display="none"}),s.goTo("next"))}).fail(k).always(function(){S(l)}))}function E(n){n.preventDefault(),m||(w(r?.parentElement),i.ajax({url:x?.ajaxUrl,type:"POST",data:{action:"udb_plugin_onboarding_skip_discount",nonce:x?.nonces.skipDiscount,referrer:a?.dataset.udbReferrer}}).done(function(n){n.success&&(b.forEach(function(n){n.style.display="none"}),s.goTo("next"))}).fail(k).always(function(){S(r?.parentElement)}))}function k(n){let e="Something went wrong";n.responseJSON&&n.responseJSON.data&&(e=n.responseJSON.data),alert(e)}function w(n){m=!0,n?.classList.add("is-loading")}function S(n){n?.classList.remove("is-loading"),m=!1}a&&d&&u&&c&&p&&l&&r&&(s=(0,n.tns)({container:".udb-onboarding-slides",items:1,loop:!1,autoHeight:!0,controls:!1,navPosition:"bottom",onInit:function(n){s.events.on("indexChanged",v);let e=document.querySelector(".onboarding-heatbox .udb-dots");e&&n.navContainer&&e.appendChild(n.navContainer),u?.addEventListener("click",y),c?.addEventListener("click",L),l?.addEventListener("click",_),r?.addEventListener("click",E)}}))}(jQuery)})();
//# sourceMappingURL=plugin-onboarding.js.map
