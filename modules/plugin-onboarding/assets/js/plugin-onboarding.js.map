{"mappings":"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","sources":["<anon>","modules/plugin-onboarding/src/plugin-onboarding.js","modules/base/assets/js/dom-utils.js"],"sourcesContent":["(() => {\n/**\n * Find an HTML element by selector.\n *\n * @param {string} selector The selector.\n * @returns {HTMLElement | null} The element or null if not found.\n */ function $776ab16a6a692098$export$77701944e3c77bc3(selector) {\n    const el = document.querySelector(selector);\n    if (el instanceof HTMLElement) return el;\n    return null;\n}\nfunction $776ab16a6a692098$export$c1ead522ca0e4e3c(selector) {\n    const nodes = document.querySelectorAll(selector);\n    const els = [];\n    for(let i = 0; i < nodes.length; i++){\n        const el = nodes[i];\n        if (el instanceof HTMLElement) els.push(el);\n    }\n    return els;\n}\nfunction $776ab16a6a692098$export$4e5337e1a9674b6(selector) {\n    const el = document.querySelector(selector);\n    if (el instanceof HTMLInputElement) return el;\n    return null;\n}\nfunction $776ab16a6a692098$export$276904e442ba468d(selector) {\n    const nodes = document.querySelectorAll(selector);\n    const els = [];\n    for(let i = 0; i < nodes.length; i++){\n        const el = nodes[i];\n        if (el instanceof HTMLInputElement) els.push(el);\n    }\n    return els;\n}\n\n\n(function($) {\n    const page = (0, $776ab16a6a692098$export$77701944e3c77bc3)(\".udb-onboarding-page\");\n    const buttonsWrapper = (0, $776ab16a6a692098$export$77701944e3c77bc3)(\".onboarding-heatbox .heatbox-footer\");\n    const skipButton = (0, $776ab16a6a692098$export$77701944e3c77bc3)(\".onboarding-heatbox .skip-button\");\n    const saveButton = (0, $776ab16a6a692098$export$77701944e3c77bc3)(\".onboarding-heatbox .save-button\");\n    const subscribeButton = (0, $776ab16a6a692098$export$77701944e3c77bc3)(\".onboarding-heatbox .subscribe-button\");\n    const skipDiscount = (0, $776ab16a6a692098$export$77701944e3c77bc3)(\".udb-skip-discount a\");\n    const contentAfterSubscribe = (0, $776ab16a6a692098$export$c1ead522ca0e4e3c)(\"[data-udb-show-on='subscribe']\");\n    const contentAfterSkipDiscount = (0, $776ab16a6a692098$export$c1ead522ca0e4e3c)(\"[data-udb-show-on='skip-discount']\");\n    const discountNotif = (0, $776ab16a6a692098$export$77701944e3c77bc3)(\".onboarding-heatbox .udb-discount-notif\");\n    const slideIndexes = [\n        \"modules\",\n        \"subscription\",\n        \"finished\"\n    ];\n    let currentSlide = \"modules\";\n    let doingAjax = false;\n    const udbPluginOnboarding = window.udbPluginOnboarding;\n    /**\n\t * @type {import(\"tiny-slider\").TinySliderInstance} slider - The slider instance.\n\t */ let slider;\n    function init() {\n        if (!page || !buttonsWrapper || !skipButton || !saveButton || !discountNotif || !subscribeButton || !skipDiscount) return;\n        setupSlider();\n    }\n    function setupSlider() {\n        slider = window.tns({\n            container: \".udb-onboarding-slides\",\n            items: 1,\n            loop: false,\n            autoHeight: true,\n            controls: false,\n            navPosition: \"bottom\",\n            onInit: onSliderInit\n        });\n    }\n    /**\n\t * Slider initialization callback\n\t *\n\t * @param {import(\"tiny-slider\").TinySliderInfo} instance The slider instance.\n\t */ function onSliderInit(instance) {\n        slider.events.on(\"indexChanged\", onSliderIndexChanged);\n        const dotsWrapper = document.querySelector(\".onboarding-heatbox .udb-dots\");\n        if (dotsWrapper && instance.navContainer) dotsWrapper.appendChild(instance.navContainer);\n        skipButton?.addEventListener(\"click\", onSkipButtonClick);\n        saveButton?.addEventListener(\"click\", onSaveButtonClick);\n        subscribeButton?.addEventListener(\"click\", onSubscribeButtonClick);\n        skipDiscount?.addEventListener(\"click\", onSkipDiscountClick);\n    }\n    /**\n\t * Event handler for when the slider index changes.\n\t *\n\t * @param {import(\"tiny-slider\").TinySliderInfo} e The event object.\n\t */ function onSliderIndexChanged(e) {\n        currentSlide = slideIndexes[e.index];\n        if (currentSlide === \"modules\") onModulesSlideSelected();\n        else if (currentSlide === \"subscription\") onSubscriptionSlideSelected();\n        else if (currentSlide === \"finished\") onFinishedSlideSelected();\n    }\n    function onModulesSlideSelected() {\n        discountNotif?.classList.add(\"is-hidden\");\n        buttonsWrapper?.classList.remove(\"is-hidden\");\n    }\n    function onSubscriptionSlideSelected() {\n        discountNotif?.classList.remove(\"is-hidden\");\n        buttonsWrapper?.classList.add(\"is-hidden\");\n    }\n    function onFinishedSlideSelected() {\n        discountNotif?.classList.add(\"is-hidden\");\n        buttonsWrapper?.classList.add(\"is-hidden\");\n    }\n    /**\n\t * Function to handle the skip button click event.\n\t *\n\t * @param {MouseEvent} e The event object.\n\t */ function onSkipButtonClick(e) {\n        switch(currentSlide){\n            case \"modules\":\n                // Go to next slide.\n                slider.goTo(\"next\");\n                break;\n            case \"subscription\":\n                // Go to dashboard.\n                window.location.href = udbPluginOnboarding?.adminUrl ?? \"\";\n                break;\n            default:\n                break;\n        }\n    }\n    /**\n\t * Function to handle the save button click event.\n\t *\n\t * @param {MouseEvent} e The event object.\n\t */ function onSaveButtonClick(e) {\n        if (doingAjax) return;\n        startLoading(saveButton);\n        $.ajax({\n            url: udbPluginOnboarding?.ajaxUrl,\n            type: \"POST\",\n            data: {\n                action: \"udb_plugin_onboarding_save_modules\",\n                nonce: udbPluginOnboarding?.nonces.saveModules,\n                modules: getSelectedModules()\n            }\n        }).done(function(r) {\n            if (!r.success) return;\n            slider.goTo(\"next\");\n        }).fail(onAjaxFail).always(function() {\n            stopLoading(saveButton);\n        });\n    }\n    /**\n\t * Function to handle the subscribe button click event.\n\t *\n\t * @param {MouseEvent} e The event object.\n\t */ function onSubscribeButtonClick(e) {\n        const nameField = (0, $776ab16a6a692098$export$4e5337e1a9674b6)(\"#udb-subscription-name\");\n        const emailField = (0, $776ab16a6a692098$export$4e5337e1a9674b6)(\"#udb-subscription-email\");\n        if (doingAjax || !nameField || !emailField) return;\n        startLoading(subscribeButton);\n        $.ajax({\n            url: udbPluginOnboarding?.ajaxUrl,\n            type: \"POST\",\n            data: {\n                action: \"udb_plugin_onboarding_subscribe\",\n                nonce: udbPluginOnboarding?.nonces.subscribe,\n                name: nameField.value,\n                email: emailField.value,\n                referrer: page?.dataset.udbReferrer ?? \"\"\n            }\n        }).done(function(r) {\n            if (!r.success) return;\n            contentAfterSkipDiscount.forEach(function(content) {\n                content.style.display = \"none\";\n            });\n            hideSetupSubmenuItem();\n            slider.goTo(\"next\");\n        }).fail(onAjaxFail).always(function() {\n            stopLoading(subscribeButton);\n        });\n    }\n    /**\n\t * Function to handle the skip discount button click event.\n\t *\n\t * @param {MouseEvent} e The event object.\n\t */ function onSkipDiscountClick(e) {\n        e.preventDefault();\n        if (doingAjax) return;\n        startLoading(skipDiscount?.parentElement);\n        $.ajax({\n            url: udbPluginOnboarding?.ajaxUrl,\n            type: \"POST\",\n            data: {\n                action: \"udb_plugin_onboarding_skip_discount\",\n                nonce: udbPluginOnboarding?.nonces.skipDiscount,\n                referrer: page?.dataset.udbReferrer\n            }\n        }).done(function(r) {\n            if (!r.success) return;\n            contentAfterSubscribe.forEach(function(content) {\n                content.style.display = \"none\";\n            });\n            hideSetupSubmenuItem();\n            slider.goTo(\"next\");\n        }).fail(onAjaxFail).always(function() {\n            stopLoading(skipDiscount?.parentElement);\n        });\n    }\n    /**\n\t * Function to handle ajax request failure.\n\t *\n\t * @param {JQueryXHR} jqXHR The ajax request object.\n\t */ function onAjaxFail(jqXHR) {\n        let errorMesssage = \"Something went wrong\";\n        if (jqXHR.responseJSON && jqXHR.responseJSON.data) errorMesssage = jqXHR.responseJSON.data;\n        alert(errorMesssage);\n    }\n    /**\n\t * Function to start loading.\n\t *\n\t * @param {HTMLElement|null|undefined} button The button element.\n\t */ function startLoading(button) {\n        doingAjax = true;\n        button?.classList.add(\"is-loading\");\n    }\n    /**\n\t * Function to stop loading.\n\t *\n\t * @param {HTMLElement|null|undefined} button The button element.\n\t */ function stopLoading(button) {\n        button?.classList.remove(\"is-loading\");\n        doingAjax = false;\n    }\n    function getSelectedModules() {\n        const checkboxes = (0, $776ab16a6a692098$export$276904e442ba468d)('.udb-modules-slide .module-toggle input[type=\"checkbox\"]');\n        if (!checkboxes.length) return [];\n        /**\n\t\t * @type {string[]} modules - The selected modules.\n\t\t */ const modules = [];\n        checkboxes.forEach(function(checkbox) {\n            const module = checkbox.id.replace(\"udb_modules__\", \"\");\n            if (checkbox.checked) modules.push(module);\n        });\n        return modules;\n    }\n    /**\n\t * Hide the \"Setup\" submenu item.\n\t */ function hideSetupSubmenuItem() {\n        const submenuItems = (0, $776ab16a6a692098$export$c1ead522ca0e4e3c)(\"#menu-posts-udb_widgets .wp-submenu > li > a\");\n        if (!submenuItems.length) return;\n        for(let i = 0; i < submenuItems.length; i++){\n            const link = submenuItems[i];\n            if (!(link instanceof HTMLAnchorElement)) continue;\n            if (link.href.includes(\"page=udb_plugin_onboarding\")) {\n                link.parentElement?.remove();\n                break;\n            }\n        }\n    }\n    init();\n})(jQuery);\n\n})();\n//# sourceMappingURL=plugin-onboarding.js.map\n","import {\n\tfindHtmlEl,\n\tfindHtmlEls,\n\tfindInputEl,\n\tfindInputEls,\n} from \"../../base/assets/js/dom-utils\";\n\n(function ($) {\n\tconst page = findHtmlEl(\".udb-onboarding-page\");\n\tconst buttonsWrapper = findHtmlEl(\".onboarding-heatbox .heatbox-footer\");\n\tconst skipButton = findHtmlEl(\".onboarding-heatbox .skip-button\");\n\tconst saveButton = findHtmlEl(\".onboarding-heatbox .save-button\");\n\tconst subscribeButton = findHtmlEl(\".onboarding-heatbox .subscribe-button\");\n\tconst skipDiscount = findHtmlEl(\".udb-skip-discount a\");\n\tconst contentAfterSubscribe = findHtmlEls(\"[data-udb-show-on='subscribe']\");\n\tconst contentAfterSkipDiscount = findHtmlEls(\n\t\t\"[data-udb-show-on='skip-discount']\"\n\t);\n\tconst discountNotif = findHtmlEl(\".onboarding-heatbox .udb-discount-notif\");\n\tconst slideIndexes = [\"modules\", \"subscription\", \"finished\"];\n\n\tlet currentSlide = \"modules\";\n\tlet doingAjax = false;\n\n\tconst udbPluginOnboarding = window.udbPluginOnboarding;\n\n\t/**\n\t * @type {import(\"tiny-slider\").TinySliderInstance} slider - The slider instance.\n\t */\n\tlet slider;\n\n\tfunction init() {\n\t\tif (\n\t\t\t!page ||\n\t\t\t!buttonsWrapper ||\n\t\t\t!skipButton ||\n\t\t\t!saveButton ||\n\t\t\t!discountNotif ||\n\t\t\t!subscribeButton ||\n\t\t\t!skipDiscount\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\tsetupSlider();\n\t}\n\n\tfunction setupSlider() {\n\t\tslider = window.tns({\n\t\t\tcontainer: \".udb-onboarding-slides\",\n\t\t\titems: 1,\n\t\t\tloop: false,\n\t\t\tautoHeight: true,\n\t\t\tcontrols: false,\n\t\t\tnavPosition: \"bottom\",\n\t\t\tonInit: onSliderInit,\n\t\t});\n\t}\n\n\t/**\n\t * Slider initialization callback\n\t *\n\t * @param {import(\"tiny-slider\").TinySliderInfo} instance The slider instance.\n\t */\n\tfunction onSliderInit(instance) {\n\t\tslider.events.on(\"indexChanged\", onSliderIndexChanged);\n\n\t\tconst dotsWrapper = document.querySelector(\".onboarding-heatbox .udb-dots\");\n\n\t\tif (dotsWrapper && instance.navContainer) {\n\t\t\tdotsWrapper.appendChild(instance.navContainer);\n\t\t}\n\n\t\tskipButton?.addEventListener(\"click\", onSkipButtonClick);\n\t\tsaveButton?.addEventListener(\"click\", onSaveButtonClick);\n\t\tsubscribeButton?.addEventListener(\"click\", onSubscribeButtonClick);\n\t\tskipDiscount?.addEventListener(\"click\", onSkipDiscountClick);\n\t}\n\n\t/**\n\t * Event handler for when the slider index changes.\n\t *\n\t * @param {import(\"tiny-slider\").TinySliderInfo} e The event object.\n\t */\n\tfunction onSliderIndexChanged(e) {\n\t\tcurrentSlide = slideIndexes[e.index];\n\n\t\tif (currentSlide === \"modules\") {\n\t\t\tonModulesSlideSelected();\n\t\t} else if (currentSlide === \"subscription\") {\n\t\t\tonSubscriptionSlideSelected();\n\t\t} else if (currentSlide === \"finished\") {\n\t\t\tonFinishedSlideSelected();\n\t\t}\n\t}\n\n\tfunction onModulesSlideSelected() {\n\t\tdiscountNotif?.classList.add(\"is-hidden\");\n\t\tbuttonsWrapper?.classList.remove(\"is-hidden\");\n\t}\n\n\tfunction onSubscriptionSlideSelected() {\n\t\tdiscountNotif?.classList.remove(\"is-hidden\");\n\t\tbuttonsWrapper?.classList.add(\"is-hidden\");\n\t}\n\n\tfunction onFinishedSlideSelected() {\n\t\tdiscountNotif?.classList.add(\"is-hidden\");\n\t\tbuttonsWrapper?.classList.add(\"is-hidden\");\n\t}\n\n\t/**\n\t * Function to handle the skip button click event.\n\t *\n\t * @param {MouseEvent} e The event object.\n\t */\n\tfunction onSkipButtonClick(e) {\n\t\tswitch (currentSlide) {\n\t\t\tcase \"modules\":\n\t\t\t\t// Go to next slide.\n\t\t\t\tslider.goTo(\"next\");\n\t\t\t\tbreak;\n\n\t\t\tcase \"subscription\":\n\t\t\t\t// Go to dashboard.\n\t\t\t\twindow.location.href = udbPluginOnboarding?.adminUrl ?? \"\";\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t/**\n\t * Function to handle the save button click event.\n\t *\n\t * @param {MouseEvent} e The event object.\n\t */\n\tfunction onSaveButtonClick(e) {\n\t\tif (doingAjax) return;\n\t\tstartLoading(saveButton);\n\n\t\t$.ajax({\n\t\t\turl: udbPluginOnboarding?.ajaxUrl,\n\t\t\ttype: \"POST\",\n\t\t\tdata: {\n\t\t\t\taction: \"udb_plugin_onboarding_save_modules\",\n\t\t\t\tnonce: udbPluginOnboarding?.nonces.saveModules,\n\t\t\t\tmodules: getSelectedModules(),\n\t\t\t},\n\t\t})\n\t\t\t.done(function (r) {\n\t\t\t\tif (!r.success) return;\n\t\t\t\tslider.goTo(\"next\");\n\t\t\t})\n\t\t\t.fail(onAjaxFail)\n\t\t\t.always(function () {\n\t\t\t\tstopLoading(saveButton);\n\t\t\t});\n\t}\n\n\t/**\n\t * Function to handle the subscribe button click event.\n\t *\n\t * @param {MouseEvent} e The event object.\n\t */\n\tfunction onSubscribeButtonClick(e) {\n\t\tconst nameField = findInputEl(\"#udb-subscription-name\");\n\t\tconst emailField = findInputEl(\"#udb-subscription-email\");\n\t\tif (doingAjax || !nameField || !emailField) return;\n\n\t\tstartLoading(subscribeButton);\n\n\t\t$.ajax({\n\t\t\turl: udbPluginOnboarding?.ajaxUrl,\n\t\t\ttype: \"POST\",\n\t\t\tdata: {\n\t\t\t\taction: \"udb_plugin_onboarding_subscribe\",\n\t\t\t\tnonce: udbPluginOnboarding?.nonces.subscribe,\n\t\t\t\tname: nameField.value,\n\t\t\t\temail: emailField.value,\n\t\t\t\treferrer: page?.dataset.udbReferrer ?? \"\",\n\t\t\t},\n\t\t})\n\t\t\t.done(function (r) {\n\t\t\t\tif (!r.success) return;\n\n\t\t\t\tcontentAfterSkipDiscount.forEach(function (content) {\n\t\t\t\t\tcontent.style.display = \"none\";\n\t\t\t\t});\n\n\t\t\t\thideSetupSubmenuItem();\n\t\t\t\tslider.goTo(\"next\");\n\t\t\t})\n\t\t\t.fail(onAjaxFail)\n\t\t\t.always(function () {\n\t\t\t\tstopLoading(subscribeButton);\n\t\t\t});\n\t}\n\n\t/**\n\t * Function to handle the skip discount button click event.\n\t *\n\t * @param {MouseEvent} e The event object.\n\t */\n\tfunction onSkipDiscountClick(e) {\n\t\te.preventDefault();\n\t\tif (doingAjax) return;\n\n\t\tstartLoading(skipDiscount?.parentElement);\n\n\t\t$.ajax({\n\t\t\turl: udbPluginOnboarding?.ajaxUrl,\n\t\t\ttype: \"POST\",\n\t\t\tdata: {\n\t\t\t\taction: \"udb_plugin_onboarding_skip_discount\",\n\t\t\t\tnonce: udbPluginOnboarding?.nonces.skipDiscount,\n\t\t\t\treferrer: page?.dataset.udbReferrer,\n\t\t\t},\n\t\t})\n\t\t\t.done(function (r) {\n\t\t\t\tif (!r.success) return;\n\n\t\t\t\tcontentAfterSubscribe.forEach(function (content) {\n\t\t\t\t\tcontent.style.display = \"none\";\n\t\t\t\t});\n\n\t\t\t\thideSetupSubmenuItem();\n\t\t\t\tslider.goTo(\"next\");\n\t\t\t})\n\t\t\t.fail(onAjaxFail)\n\t\t\t.always(function () {\n\t\t\t\tstopLoading(skipDiscount?.parentElement);\n\t\t\t});\n\t}\n\n\t/**\n\t * Function to handle ajax request failure.\n\t *\n\t * @param {JQueryXHR} jqXHR The ajax request object.\n\t */\n\tfunction onAjaxFail(jqXHR) {\n\t\tlet errorMesssage = \"Something went wrong\";\n\n\t\tif (jqXHR.responseJSON && jqXHR.responseJSON.data) {\n\t\t\terrorMesssage = jqXHR.responseJSON.data;\n\t\t}\n\n\t\talert(errorMesssage);\n\t}\n\n\t/**\n\t * Function to start loading.\n\t *\n\t * @param {HTMLElement|null|undefined} button The button element.\n\t */\n\tfunction startLoading(button) {\n\t\tdoingAjax = true;\n\t\tbutton?.classList.add(\"is-loading\");\n\t}\n\n\t/**\n\t * Function to stop loading.\n\t *\n\t * @param {HTMLElement|null|undefined} button The button element.\n\t */\n\tfunction stopLoading(button) {\n\t\tbutton?.classList.remove(\"is-loading\");\n\t\tdoingAjax = false;\n\t}\n\n\tfunction getSelectedModules() {\n\t\tconst checkboxes = findInputEls(\n\t\t\t'.udb-modules-slide .module-toggle input[type=\"checkbox\"]'\n\t\t);\n\t\tif (!checkboxes.length) return [];\n\n\t\t/**\n\t\t * @type {string[]} modules - The selected modules.\n\t\t */\n\t\tconst modules = [];\n\n\t\tcheckboxes.forEach(function (checkbox) {\n\t\t\tconst module = checkbox.id.replace(\"udb_modules__\", \"\");\n\n\t\t\tif (checkbox.checked) {\n\t\t\t\tmodules.push(module);\n\t\t\t}\n\t\t});\n\n\t\treturn modules;\n\t}\n\n\t/**\n\t * Hide the \"Setup\" submenu item.\n\t */\n\tfunction hideSetupSubmenuItem() {\n\t\tconst submenuItems = findHtmlEls(\n\t\t\t\"#menu-posts-udb_widgets .wp-submenu > li > a\"\n\t\t);\n\t\tif (!submenuItems.length) return;\n\n\t\tfor (let i = 0; i < submenuItems.length; i++) {\n\t\t\tconst link = submenuItems[i];\n\t\t\tif (!(link instanceof HTMLAnchorElement)) continue;\n\n\t\t\tif (link.href.includes(\"page=udb_plugin_onboarding\")) {\n\t\t\t\tlink.parentElement?.remove();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tinit();\n})(jQuery);\n","/**\n * Find an HTML element by selector.\n *\n * @param {string} selector The selector.\n * @returns {HTMLElement | null} The element or null if not found.\n */\nexport function findHtmlEl(selector) {\n\tconst el = document.querySelector(selector);\n\n\tif (el instanceof HTMLElement) {\n\t\treturn el;\n\t}\n\n\treturn null;\n}\n\n/**\n * Find HTML elements by selector.\n *\n * @param {string} selector The selector.\n * @returns {HTMLElement[]} The HTML elements.\n */\nexport function findHtmlEls(selector) {\n\tconst nodes = document.querySelectorAll(selector);\n\tconst els = [];\n\n\tfor (let i = 0; i < nodes.length; i++) {\n\t\tconst el = nodes[i];\n\n\t\tif (el instanceof HTMLElement) {\n\t\t\tels.push(el);\n\t\t}\n\t}\n\n\treturn els;\n}\n\n/**\n * Find an HTML input element by selector.\n *\n * @param {string} selector The selector.\n * @returns {HTMLInputElement | null} The element or null if not found.\n */\nexport function findInputEl(selector) {\n\tconst el = document.querySelector(selector);\n\n\tif (el instanceof HTMLInputElement) {\n\t\treturn el;\n\t}\n\n\treturn null;\n}\n\n/**\n * Find HTML input elements by selector.\n *\n * @param {string} selector The selector.\n * @returns {HTMLInputElement[]} The HTML input elements.\n */\nexport function findInputEls(selector) {\n\tconst nodes = document.querySelectorAll(selector);\n\tconst els = [];\n\n\tfor (let i = 0; i < nodes.length; i++) {\n\t\tconst el = nodes[i];\n\n\t\tif (el instanceof HTMLInputElement) {\n\t\t\tels.push(el);\n\t\t}\n\t}\n\n\treturn els;\n}\n"],"names":["$776ab16a6a692098$export$77701944e3c77bc3","selector","el","document","querySelector","HTMLElement","$776ab16a6a692098$export$c1ead522ca0e4e3c","nodes","querySelectorAll","els","i","length","push","$776ab16a6a692098$export$4e5337e1a9674b6","HTMLInputElement","$","slider","page","buttonsWrapper","skipButton","saveButton","subscribeButton","skipDiscount","contentAfterSubscribe","contentAfterSkipDiscount","discountNotif","slideIndexes","currentSlide","doingAjax","udbPluginOnboarding","window","onSliderIndexChanged","e","index","classList","add","remove","onSkipButtonClick","goTo","location","href","adminUrl","onSaveButtonClick","startLoading","ajax","url","ajaxUrl","type","data","action","nonce","nonces","saveModules","modules","getSelectedModules","checkboxes","forEach","checkbox","module","id","replace","checked","done","r","success","fail","onAjaxFail","always","stopLoading","onSubscribeButtonClick","nameField","emailField","subscribe","name","value","email","referrer","dataset","udbReferrer","content","style","display","hideSetupSubmenuItem","onSkipDiscountClick","preventDefault","parentElement","jqXHR","errorMesssage","responseJSON","alert","button","submenuItems","link","HTMLAnchorElement","includes","tns","container","items","loop","autoHeight","controls","navPosition","onInit","instance","events","on","dotsWrapper","navContainer","appendChild","addEventListener","jQuery"],"version":3,"file":"plugin-onboarding.js.map"}